<project name="JDepend Project">

    <!-- javac class output directory: -->
     
    <property name="reports.dir" value="${wd}/reports" />
    <property name="reports.html.dir" value="${wd}/reports/html" />
    <property name="reports.xml.dir" value="${wd}/reports/xml" />
    
    <property name="jdepend.lib.dir" value="${toolDir}/lib" />

    <path id="jdepend.lib">
    	<fileset dir="${jdepend.lib.dir}">
        	<include name="*.jar"/>
    	</fileset>
    </path>    
  
    <taskdef resource="jdepend_ant.properties" classpathref="jdepend.lib"/>
    
    <target name="clean">
	<delete dir="${reports.dir}"/>
    </target>

    <target name="prepare">
	<mkdir dir="${reports.xml.dir}"/>
	<mkdir dir="${reports.html.dir}"/>
    </target>
    
    <target name="cleanbuild" depends="clean, prepare">
	<jdepend outputfile="${reports.xml.dir}/report.xml" fork="yes" format="xml">
		<exclude name="java.*"/>
		<exclude name="javax.*"/>
    		<classespath>
        		_TOOL_CP_
    		</classespath>
    		<classpath>
        		<fileset dir="${jdepend.lib.dir}">
        			<include name="**/*.jar" />
        		</fileset>
    		</classpath>
    		
	</jdepend> 
	
	<style in="${reports.xml.dir}/report.xml" out="${reports.html.dir}/report.html" style="${toolDir}/jdepend.xsl"/>
     </target>
</project>
