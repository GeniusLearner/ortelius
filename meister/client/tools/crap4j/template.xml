<?xml version="1.0" ?>
<project name="crap4j">

	<!-- #1 redefine crap4j_home to point to the absolute directory where you unzipped crap4j -->
		
	<property name="CRAP4J_HOME" value="${toolDir}"/>
	<property name="reports.dir" value="${wd}/reports/html"/>
	<!-- Define the Crap4j ant task -->
	
	<taskdef name="crap4j" classname="org.crap4j.anttask.Crap4jAntTask" >
		<classpath>
			<fileset dir="${toolDir}/lib">
				<include name="**/*.jar" />
			</fileset>
		</classpath>
	</taskdef>
	
    	<target name="clean">
		<delete dir="${reports.dir}"/>
    	</target>

    	<target name="prepare">
		<mkdir dir="${reports.dir}"/>
    	</target>

	<!-- #2 Use crap4j on the project -->
	<target name="cleanbuild" depends="clean, prepare">
		<crap4j projectdir="${wd}" 
			    outputDir="${reports.dir}" 
			    dontTest="false"
			    downloadAverages="true"
			    server="http://www.crap4j.org/benchmark/"
			    crap4jhome="${CRAP4J_HOME}"
			    debug="false">
			
			<classes>
				<!-- put the project's class directories here. These are the classes you want crap numbers for -->
				_TOOL_CP_
			</classes>
			
			<srces>
				<!-- The project's src folders -->
				<pathElement location="${src}" />
			</srces>
			
			<testClasses>
				<!-- The project's test classes. 
				         Note, separating it from the project classes makes life so much easier
				         but if you didn't, then you probably just want to repeat the classDir entry here -->
				
			</testClasses>	
			<libClasspath>
				<!-- Put the dependent paths and libraries here. 
				         This is for stuff necessary to your project, but not stuff you want analyzed -->
				<!-- if you get errors loading any agitar classes, like the mock classes, add this entry -->
				<!--
				<fileset dir="${CRAP4J_HOME}/lib">
					<include name="**/*.jar" />
				</fileset>				
										
				 -->               
			</libClasspath>				
		</crap4j>
	</target>
</project>
